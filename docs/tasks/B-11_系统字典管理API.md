# B-11: ç³»ç»Ÿå­—å…¸ç®¡ç† API å¼€å‘ä»»åŠ¡è¯´æ˜ä¹¦

## ä¸€ã€ä»»åŠ¡åŸºæœ¬ä¿¡æ¯

- ä»»åŠ¡ID: B-11
- ä»»åŠ¡åç§°: ç³»ç»Ÿå­—å…¸ç®¡ç†APIï¼ˆå­—å…¸ç±»å‹ä¸å­—å…¸é¡¹çš„å¢åˆ æ”¹æŸ¥ã€ç»Ÿä¸€é€‰é¡¹æŸ¥è¯¢ï¼‰
- å¤æ‚åº¦: Sï¼ˆçº¦ 2 PDï¼‰
- ä¼˜å…ˆçº§: P1
- ä¾èµ–ä»»åŠ¡: B-01ï¼ˆè®¤è¯ä¸é‰´æƒåŸºç¡€èƒ½åŠ›ï¼‰
- å…³è”å‰ç«¯: FE-07ï¼ˆç³»ç»Ÿå­—å…¸ç®¡ç†é¡µé¢ï¼‰

---

## äºŒã€ç›®æ ‡ä¸èŒƒå›´ï¼ˆScopeï¼‰

### 2.1 ç›®æ ‡
- æä¾›ç³»ç»Ÿå­—å…¸ç±»å‹ï¼ˆDict Typeï¼‰ä¸å­—å…¸é¡¹ï¼ˆDict Itemï¼‰çš„æ ‡å‡†åŒ– CRUD æ¥å£ã€‚
- æ”¯æŒå­—å…¸é¡¹çš„å±‚çº§å…³ç³»ï¼ˆé¢„ç•™çˆ¶å­å…³ç³»å­—æ®µï¼ŒV1 å¯é€‰å®ç°ï¼‰ã€‚
- æä¾›ç»Ÿä¸€çš„é€‰é¡¹æŸ¥è¯¢æ¥å£ï¼Œä¾›å‰ç«¯ä¸‹æ‹‰åˆ—è¡¨ä¸åç«¯æ•°æ®æ ¡éªŒå¤ç”¨ï¼ˆå¦‚è¯­è¨€/åœ°åŒº/è´¨é‡ç­‰ï¼‰ã€‚
- æ”¯æŒå­—å…¸é¡¹çš„æ’åºã€å¯ç”¨/ç¦ç”¨çŠ¶æ€ç®¡ç†ã€‚
- ç»Ÿä¸€å“åº”ç»“æ„ï¼Œä¾¿äºå‰ç«¯æ‹¦æˆªå™¨ä¸æ–‡æ¡£å¯¹é½ã€‚

### 2.2 èŒƒå›´
- API å‰ç¼€: `/api/v1/dict/*`
- æ•°æ®æ¨¡å‹: 
  - `DictType`ï¼ˆå­—å…¸ç±»å‹è¡¨ï¼‰ï¼š`id`, `code`ï¼ˆå”¯ä¸€ç¼–ç ï¼‰, `name`ï¼ˆæ˜¾ç¤ºåç§°ï¼‰, `description`, `is_active`, `created_at`, `updated_at`
  - `DictItem`ï¼ˆå­—å…¸é¡¹è¡¨ï¼‰ï¼š`id`, `dict_type_code`ï¼ˆå¤–é”®å…³è”ç±»å‹ï¼‰, `code`ï¼ˆé¡¹ç¼–ç ï¼‰, `name`ï¼ˆæ˜¾ç¤ºåç§°ï¼‰, `value`ï¼ˆå®é™…å€¼ï¼‰, `sort_order`ï¼ˆæ’åºï¼‰, `parent_id`ï¼ˆçˆ¶é¡¹IDï¼Œé¢„ç•™å±‚çº§ï¼‰, `is_active`, `extra_data`ï¼ˆJSONæ‰©å±•å­—æ®µï¼‰, `created_at`, `updated_at`
- å“åº”å°è£…: `backend/app/utils/response.py`ï¼ˆ`success_response` / `error_response`ï¼‰

éèŒƒå›´ï¼ˆåç»­è¿­ä»£ï¼‰:
- å­—å…¸é¡¹çš„å¤šè¯­è¨€æ”¯æŒã€ç‰ˆæœ¬å®¡è®¡ã€å¯¼å…¥å¯¼å‡ºã€æ‰¹é‡æ“ä½œ

---

## ä¸‰ã€ä¸šåŠ¡è§„åˆ™ï¼ˆBusiness Rulesï¼‰

1. å­—å…¸ç±»å‹ï¼ˆDictTypeï¼‰ï¼š
   - `code` ä¸ºå”¯ä¸€æ ‡è¯†ï¼ˆå¦‚ `language`, `region`, `quality`ï¼‰ï¼Œä¸å¯é‡å¤ã€‚
   - `name` ä¸ºæ˜¾ç¤ºåç§°ï¼ˆå¦‚"è¯­è¨€é€‰é¡¹"ã€"åœ°åŒºé€‰é¡¹"ã€"è´¨é‡æ ‡ç­¾"ï¼‰ã€‚
   - `is_active` æ§åˆ¶è¯¥ç±»å‹æ˜¯å¦å¯ç”¨ï¼›ç¦ç”¨åå‰ç«¯ä¸å±•ç¤ºç›¸å…³é€‰é¡¹ã€‚

2. å­—å…¸é¡¹ï¼ˆDictItemï¼‰ï¼š
   - `dict_type_code` å…³è”åˆ°å­—å…¸ç±»å‹ï¼Œåˆ é™¤ç±»å‹æ—¶éœ€è€ƒè™‘çº§è”ç­–ç•¥ï¼ˆå»ºè®®çº§è”åˆ é™¤æˆ–è½¯åˆ é™¤ï¼‰ã€‚
   - `code` åœ¨åŒä¸€å­—å…¸ç±»å‹ä¸‹å”¯ä¸€ï¼ˆè”åˆå”¯ä¸€çº¦æŸï¼š`dict_type_code + code`ï¼‰ã€‚
   - `value` ä¸ºå®é™…ä½¿ç”¨çš„å€¼ï¼ˆå¦‚ `zh-CN`, `en-US`ï¼‰ã€‚
   - `sort_order` æ§åˆ¶å‰ç«¯å±•ç¤ºé¡ºåºï¼ˆæ•°å€¼è¶Šå°è¶Šé å‰ï¼‰ã€‚
   - `parent_id` é¢„ç•™å±‚çº§å…³ç³»ï¼ˆå¦‚åœ°åŒºå¯æŒ‰æ´²/å›½å®¶/åŸå¸‚å±‚çº§ç»„ç»‡ï¼‰ï¼ŒV1 å¯ä¸º `null`ã€‚
   - `extra_data` ä¸º JSON å­—æ®µï¼Œå­˜å‚¨æ‰©å±•å±æ€§ï¼ˆå¦‚å›¾æ ‡ã€é¢œè‰²ã€æè¿°ç­‰ï¼‰ã€‚

3. å”¯ä¸€æ€§ä¸çŠ¶æ€ï¼š
   - å­—å…¸ç±»å‹ `code` å…¨å±€å”¯ä¸€ã€‚
   - å­—å…¸é¡¹ `code` åœ¨åŒä¸€ç±»å‹ä¸‹å”¯ä¸€ã€‚
   - `is_active` æ§åˆ¶å¯ç”¨çŠ¶æ€ï¼Œç¦ç”¨åå‰ç«¯ä¸è¿”å›è¯¥é€‰é¡¹ã€‚

4. é‰´æƒï¼š
   - æŸ¥è¯¢æ¥å£ï¼ˆGET `/dict/types`, GET `/dict/items`ï¼‰å…è®¸ç™»å½•ç”¨æˆ·è®¿é—®ã€‚
   - å†™æ“ä½œï¼ˆPOST/PUT/DELETEï¼‰é™å®šä¸ºç®¡ç†å‘˜ï¼ˆ`is_superuser=true`ï¼‰ã€‚

5. ç»Ÿä¸€å“åº”ï¼š
   - æˆåŠŸï¼š`{ code: 200, message: "OK", data: {...} }`
   - å¤±è´¥ï¼š`{ code: <ä¸šåŠ¡ç >, message: <é”™è¯¯æè¿°>, data: <å¯é€‰> }`

---

## å››ã€API è®¾è®¡ï¼ˆOpenAPI æ¦‚è§ˆï¼‰

è¯´æ˜ï¼šä»¥ä¸‹å‡ä¸ºåŒ…è£¹åœ¨ç»Ÿä¸€å“åº”ç»“æ„ä¸‹çš„ `data` å­—æ®µç¤ºä¾‹ã€‚

### 4.1 å­—å…¸ç±»å‹ç®¡ç†

#### 4.1.1 GET `/api/v1/dict/types`
- ç”¨é€”ï¼šè·å–å­—å…¸ç±»å‹åˆ—è¡¨ã€‚
- æŸ¥è¯¢å‚æ•°ï¼š
  - `is_active`ï¼ˆå¯é€‰ï¼Œå¸ƒå°”ï¼‰ï¼šä»…è¿”å›å¯ç”¨çš„ç±»å‹ã€‚
  - `page`ï¼ˆå¯é€‰ï¼Œæ•´æ•°ï¼Œé»˜è®¤1ï¼‰ï¼šåˆ†é¡µé¡µç ã€‚
  - `page_size`ï¼ˆå¯é€‰ï¼Œæ•´æ•°ï¼Œé»˜è®¤20ï¼‰ï¼šæ¯é¡µæ¡æ•°ã€‚
- å“åº”ç¤ºä¾‹ï¼š
```json
{
  "items": [
    {
      "id": 1,
      "code": "language",
      "name": "è¯­è¨€é€‰é¡¹",
      "description": "ç³»ç»Ÿæ”¯æŒçš„è¯­è¨€åˆ—è¡¨",
      "is_active": true,
      "created_at": "2025-10-19T10:00:00Z",
      "updated_at": "2025-10-19T10:00:00Z"
    },
    {
      "id": 2,
      "code": "region",
      "name": "åœ°åŒºé€‰é¡¹",
      "description": "å†…å®¹åœ°åŒºåˆ†ç±»",
      "is_active": true,
      "created_at": "2025-10-19T10:00:00Z",
      "updated_at": "2025-10-19T10:00:00Z"
    }
  ],
  "total": 2,
  "page": 1,
  "page_size": 20
}
```

#### 4.1.2 POST `/api/v1/dict/types`
- ç”¨é€”ï¼šåˆ›å»ºå­—å…¸ç±»å‹ã€‚
- é‰´æƒï¼šä»…ç®¡ç†å‘˜ã€‚
- è¯·æ±‚ä½“ï¼š
```json
{
  "code": "quality",
  "name": "è´¨é‡æ ‡ç­¾",
  "description": "è§†é¢‘è´¨é‡åˆ†ç±»ï¼ˆå¦‚1080p, 4Kç­‰ï¼‰",
  "is_active": true
}
```
- æˆåŠŸï¼šè¿”å›åˆ›å»ºçš„ç±»å‹å¯¹è±¡ã€‚

#### 4.1.3 PUT `/api/v1/dict/types/{type_id}`
- ç”¨é€”ï¼šæ›´æ–°å­—å…¸ç±»å‹ã€‚
- é‰´æƒï¼šä»…ç®¡ç†å‘˜ã€‚
- è§„åˆ™ï¼šä¸å…è®¸ä¿®æ”¹ `code`ï¼ˆå”¯ä¸€æ ‡è¯†ï¼‰ã€‚
- æˆåŠŸï¼šè¿”å›æ›´æ–°åçš„ç±»å‹å¯¹è±¡ã€‚

#### 4.1.4 DELETE `/api/v1/dict/types/{type_id}`
- ç”¨é€”ï¼šåˆ é™¤å­—å…¸ç±»å‹ã€‚
- é‰´æƒï¼šä»…ç®¡ç†å‘˜ã€‚
- è§„åˆ™ï¼šçº§è”åˆ é™¤è¯¥ç±»å‹ä¸‹æ‰€æœ‰å­—å…¸é¡¹ï¼ˆå»ºè®®å‰ç«¯äºŒæ¬¡ç¡®è®¤ï¼‰ã€‚
- æˆåŠŸï¼š`{ deleted: true }`ã€‚

### 4.2 å­—å…¸é¡¹ç®¡ç†

#### 4.2.1 GET `/api/v1/dict/items`
- ç”¨é€”ï¼šè·å–å­—å…¸é¡¹åˆ—è¡¨ã€‚
- æŸ¥è¯¢å‚æ•°ï¼š
  - `dict_type_code`ï¼ˆå¿…å¡«ï¼Œå­—ç¬¦ä¸²ï¼‰ï¼šå­—å…¸ç±»å‹ç¼–ç ã€‚
  - `is_active`ï¼ˆå¯é€‰ï¼Œå¸ƒå°”ï¼‰ï¼šä»…è¿”å›å¯ç”¨çš„é¡¹ã€‚
  - `parent_id`ï¼ˆå¯é€‰ï¼Œæ•´æ•°ï¼‰ï¼šæŒ‰çˆ¶é¡¹ç­›é€‰ï¼ˆå±‚çº§æŸ¥è¯¢ï¼‰ã€‚
  - `page`ï¼ˆå¯é€‰ï¼Œæ•´æ•°ï¼Œé»˜è®¤1ï¼‰ï¼šåˆ†é¡µé¡µç ã€‚
  - `page_size`ï¼ˆå¯é€‰ï¼Œæ•´æ•°ï¼Œé»˜è®¤50ï¼‰ï¼šæ¯é¡µæ¡æ•°ã€‚
- å“åº”ç¤ºä¾‹ï¼š
```json
{
  "items": [
    {
      "id": 1,
      "dict_type_code": "language",
      "code": "zh-CN",
      "name": "ç®€ä½“ä¸­æ–‡",
      "value": "zh-CN",
      "sort_order": 1,
      "parent_id": null,
      "is_active": true,
      "extra_data": { "icon": "ğŸ‡¨ğŸ‡³" },
      "created_at": "2025-10-19T10:00:00Z",
      "updated_at": "2025-10-19T10:00:00Z"
    },
    {
      "id": 2,
      "dict_type_code": "language",
      "code": "en-US",
      "name": "English (US)",
      "value": "en-US",
      "sort_order": 2,
      "parent_id": null,
      "is_active": true,
      "extra_data": { "icon": "ğŸ‡ºğŸ‡¸" },
      "created_at": "2025-10-19T10:00:00Z",
      "updated_at": "2025-10-19T10:00:00Z"
    }
  ],
  "total": 2,
  "page": 1,
  "page_size": 50
}
```

#### 4.2.2 GET `/api/v1/dict/items/{item_id}`
- ç”¨é€”ï¼šè·å–å•ä¸ªå­—å…¸é¡¹è¯¦æƒ…ã€‚
- æˆåŠŸï¼šè¿”å›å­—å…¸é¡¹å¯¹è±¡ã€‚

#### 4.2.3 POST `/api/v1/dict/items`
- ç”¨é€”ï¼šåˆ›å»ºå­—å…¸é¡¹ã€‚
- é‰´æƒï¼šä»…ç®¡ç†å‘˜ã€‚
- è¯·æ±‚ä½“ï¼š
```json
{
  "dict_type_code": "language",
  "code": "ja-JP",
  "name": "æ—¥æœ¬èª",
  "value": "ja-JP",
  "sort_order": 3,
  "parent_id": null,
  "is_active": true,
  "extra_data": { "icon": "ğŸ‡¯ğŸ‡µ" }
}
```
- æˆåŠŸï¼šè¿”å›åˆ›å»ºçš„å­—å…¸é¡¹å¯¹è±¡ã€‚

#### 4.2.4 PUT `/api/v1/dict/items/{item_id}`
- ç”¨é€”ï¼šæ›´æ–°å­—å…¸é¡¹ã€‚
- é‰´æƒï¼šä»…ç®¡ç†å‘˜ã€‚
- è§„åˆ™ï¼šä¸å…è®¸ä¿®æ”¹ `dict_type_code` ä¸ `code`ï¼ˆå”¯ä¸€æ ‡è¯†ï¼‰ã€‚
- æˆåŠŸï¼šè¿”å›æ›´æ–°åçš„å­—å…¸é¡¹å¯¹è±¡ã€‚

#### 4.2.5 DELETE `/api/v1/dict/items/{item_id}`
- ç”¨é€”ï¼šåˆ é™¤å­—å…¸é¡¹ã€‚
- é‰´æƒï¼šä»…ç®¡ç†å‘˜ã€‚
- è§„åˆ™ï¼šè‹¥æœ‰å­é¡¹ï¼Œéœ€çº§è”åˆ é™¤æˆ–æ‹’ç»åˆ é™¤ï¼ˆå»ºè®®å‰ç«¯äºŒæ¬¡ç¡®è®¤ï¼‰ã€‚
- æˆåŠŸï¼š`{ deleted: true }`ã€‚

### 4.3 ç»Ÿä¸€é€‰é¡¹æŸ¥è¯¢æ¥å£

#### 4.3.1 GET `/api/v1/dict/options/{dict_type_code}`
- ç”¨é€”ï¼šè·å–æŒ‡å®šå­—å…¸ç±»å‹çš„æ‰€æœ‰å¯ç”¨é€‰é¡¹ï¼ˆç”¨äºå‰ç«¯ä¸‹æ‹‰åˆ—è¡¨ï¼‰ã€‚
- æŸ¥è¯¢å‚æ•°ï¼š
  - `parent_id`ï¼ˆå¯é€‰ï¼Œæ•´æ•°ï¼‰ï¼šæŒ‰çˆ¶é¡¹ç­›é€‰ï¼ˆå±‚çº§æŸ¥è¯¢ï¼‰ã€‚
- å“åº”ç¤ºä¾‹ï¼š
```json
{
  "dict_type": {
    "code": "language",
    "name": "è¯­è¨€é€‰é¡¹"
  },
  "options": [
    {
      "code": "zh-CN",
      "name": "ç®€ä½“ä¸­æ–‡",
      "value": "zh-CN",
      "extra_data": { "icon": "ğŸ‡¨ğŸ‡³" }
    },
    {
      "code": "en-US",
      "name": "English (US)",
      "value": "en-US",
      "extra_data": { "icon": "ğŸ‡ºğŸ‡¸" }
    }
  ]
}
```
- è¯´æ˜ï¼š
  - ä»…è¿”å› `is_active=true` çš„ç±»å‹ä¸é¡¹ã€‚
  - æŒ‰ `sort_order` å‡åºæ’åˆ—ã€‚
  - ç®€åŒ–å­—æ®µï¼Œä»…è¿”å›å‰ç«¯å¿…è¦ä¿¡æ¯ã€‚

---

## äº”ã€æ•°æ®æ¨¡å‹ï¼ˆSchema å®šä¹‰ï¼‰

### 5.1 å­—å…¸ç±»å‹ï¼ˆDictTypeï¼‰
```python
class DictType(Base):
    __tablename__ = "dict_types"
    
    id: int = Column(Integer, primary_key=True, index=True)
    code: str = Column(String(50), unique=True, nullable=False, index=True, comment="ç±»å‹ç¼–ç ï¼ˆå”¯ä¸€ï¼‰")
    name: str = Column(String(100), nullable=False, comment="ç±»å‹åç§°")
    description: str = Column(String(500), nullable=True, comment="æè¿°")
    is_active: bool = Column(Boolean, default=True, comment="æ˜¯å¦å¯ç”¨")
    created_at: datetime = Column(DateTime, default=datetime.utcnow)
    updated_at: datetime = Column(DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)
```

### 5.2 å­—å…¸é¡¹ï¼ˆDictItemï¼‰
```python
class DictItem(Base):
    __tablename__ = "dict_items"
    
    id: int = Column(Integer, primary_key=True, index=True)
    dict_type_code: str = Column(String(50), ForeignKey("dict_types.code", ondelete="CASCADE"), nullable=False, index=True, comment="å­—å…¸ç±»å‹ç¼–ç ")
    code: str = Column(String(50), nullable=False, index=True, comment="é¡¹ç¼–ç ")
    name: str = Column(String(100), nullable=False, comment="æ˜¾ç¤ºåç§°")
    value: str = Column(String(200), nullable=False, comment="å®é™…å€¼")
    sort_order: int = Column(Integer, default=0, comment="æ’åºï¼ˆå‡åºï¼‰")
    parent_id: int = Column(Integer, ForeignKey("dict_items.id", ondelete="CASCADE"), nullable=True, comment="çˆ¶é¡¹IDï¼ˆå±‚çº§ï¼‰")
    is_active: bool = Column(Boolean, default=True, comment="æ˜¯å¦å¯ç”¨")
    extra_data: str = Column(Text, nullable=True, comment="æ‰©å±•æ•°æ®ï¼ˆJSONï¼‰")
    created_at: datetime = Column(DateTime, default=datetime.utcnow)
    updated_at: datetime = Column(DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)
    
    __table_args__ = (
        UniqueConstraint('dict_type_code', 'code', name='uq_dict_item_type_code'),
    )
```

### 5.3 Pydantic è¯·æ±‚/å“åº”æ¨¡å‹
- `DictTypeCreate`, `DictTypeUpdate`, `DictTypeOut`
- `DictItemCreate`, `DictItemUpdate`, `DictItemOut`
- `DictOptionOut`ï¼ˆç®€åŒ–é€‰é¡¹æ¨¡å‹ï¼Œç”¨äº `/options` æ¥å£ï¼‰

---

## å…­ã€é”™è¯¯ç ä¸æ¶ˆæ¯
- 200ï¼šæˆåŠŸ
- 400ï¼šå‚æ•°ä¸åˆæ³•ï¼ˆç¼ºå°‘å¿…å¡«/æ ¼å¼é”™è¯¯ï¼‰
- 401ï¼šæœªè®¤è¯
- 403ï¼šç¦æ­¢è®¿é—®ï¼ˆä»…ç®¡ç†å‘˜å¯å†™ï¼‰
- 404ï¼šå­—å…¸ç±»å‹æˆ–å­—å…¸é¡¹ä¸å­˜åœ¨
- 409ï¼šç¼–ç å†²çªï¼ˆ`code` é‡å¤ï¼‰
- 500ï¼šæœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

## ä¸ƒã€å®ç°è®¡åˆ’ï¼ˆTasksï¼‰

1. **æ•°æ®æ¨¡å‹ä¸è¿ç§»**ï¼š
   - åˆ›å»º `DictType` ä¸ `DictItem` æ¨¡å‹ï¼ˆ`backend/app/models/dict.py`ï¼‰ã€‚
   - ç¼–å†™ Alembic è¿ç§»è„šæœ¬ï¼Œåˆ›å»ºè¡¨ä¸ç´¢å¼•ã€‚

2. **CRUD æ“ä½œå±‚**ï¼š
   - åˆ›å»º `backend/app/db/crud_dict.py`ï¼Œå®ç°å­—å…¸ç±»å‹ä¸å­—å…¸é¡¹çš„ CRUD æ–¹æ³•ã€‚
   - æ”¯æŒåˆ†é¡µã€ç­›é€‰ã€æ’åºã€‚

3. **API ç«¯ç‚¹**ï¼š
   - åˆ›å»º `backend/app/api/endpoints/dict.py`ï¼Œå®ç°æ‰€æœ‰æ¥å£ã€‚
   - æ¥å…¥ç»Ÿä¸€å“åº”å°è£…ï¼ˆ`success_response` / `error_response`ï¼‰ã€‚
   - é‰´æƒè£…é¥°å™¨ï¼šæŸ¥è¯¢æ¥å£ `get_current_user`ï¼Œå†™æ¥å£ `get_current_superuser`ã€‚

4. **è·¯ç”±æ³¨å†Œ**ï¼š
   - åœ¨ `backend/app/api/routes.py` ä¸­æ³¨å†Œ `dict` è·¯ç”±ï¼ˆå‰ç¼€ `/api/v1/dict`ï¼‰ã€‚

5. **Swagger æ–‡æ¡£**ï¼š
   - ä¸ºæ‰€æœ‰æ¥å£æ·»åŠ  OpenAPI æ³¨é‡Šä¸ç¤ºä¾‹ã€‚
   - æ ‡ç­¾ï¼š`å­—å…¸ç®¡ç†`ã€‚

6. **å•å…ƒæµ‹è¯•**ï¼š
   - ç¼–å†™ `backend/tests/test_dict.py`ï¼Œè¦†ç›– CRUD ä¸é€‰é¡¹æŸ¥è¯¢çš„æˆåŠŸ/å¤±è´¥è·¯å¾„ã€‚

7. **åˆå§‹åŒ–æ•°æ®ï¼ˆå¯é€‰ï¼‰**ï¼š
   - æä¾›è„šæœ¬æˆ–è¿ç§»åé’©å­ï¼Œåˆå§‹åŒ–å¸¸ç”¨å­—å…¸ç±»å‹ä¸é€‰é¡¹ï¼ˆå¦‚è¯­è¨€ã€åœ°åŒºï¼‰ã€‚

---

## å…«ã€å…³é”®æµ‹è¯•ç”¨ä¾‹ï¼ˆç¤ºä¾‹ï¼‰

### å­—å…¸ç±»å‹
- åˆ›å»ºç±»å‹æˆåŠŸï¼š`code` å”¯ä¸€ï¼Œè¿”å›å®Œæ•´å¯¹è±¡ã€‚
- åˆ›å»ºé‡å¤ç±»å‹ï¼šåŒ `code` å†²çª â†’ 409ã€‚
- æ›´æ–°ç±»å‹æˆåŠŸï¼šå…è®¸ä¿®æ”¹ `name`ã€`description`ã€`is_active`ã€‚
- åˆ é™¤ç±»å‹æˆåŠŸï¼šçº§è”åˆ é™¤æ‰€æœ‰å­—å…¸é¡¹ã€‚

### å­—å…¸é¡¹
- åˆ›å»ºå­—å…¸é¡¹æˆåŠŸï¼š`dict_type_code + code` å”¯ä¸€ï¼Œè¿”å›å®Œæ•´å¯¹è±¡ã€‚
- åˆ›å»ºé‡å¤é¡¹ï¼šåŒç±»å‹ä¸‹ `code` å†²çª â†’ 409ã€‚
- æ›´æ–°å­—å…¸é¡¹æˆåŠŸï¼šå…è®¸ä¿®æ”¹ `name`ã€`value`ã€`sort_order`ã€`is_active`ã€`extra_data`ã€‚
- åˆ é™¤å­—å…¸é¡¹æˆåŠŸï¼šè‹¥æœ‰å­é¡¹ï¼Œçº§è”åˆ é™¤æˆ–æ‹’ç»ï¼ˆæ ¹æ®å®ç°é€‰æ‹©ï¼‰ã€‚

### é€‰é¡¹æŸ¥è¯¢
- æŸ¥è¯¢å¯ç”¨é€‰é¡¹ï¼šä»…è¿”å› `is_active=true` çš„é¡¹ï¼ŒæŒ‰ `sort_order` æ’åºã€‚
- æŸ¥è¯¢ä¸å­˜åœ¨çš„ç±»å‹ï¼š404ã€‚
- æŒ‰ `parent_id` ç­›é€‰ï¼šè¿”å›æŒ‡å®šå±‚çº§çš„å­é¡¹ã€‚

---

## ä¹ã€éªŒæ”¶æ ‡å‡†ï¼ˆAcceptance Criteriaï¼‰

1. `/api/v1/dict/*` æä¾›å®Œæ•´çš„å­—å…¸ç±»å‹ä¸å­—å…¸é¡¹ CRUD æ¥å£ï¼Œç»Ÿä¸€å“åº”ç»“æ„ä¸é”™è¯¯ç å¯¹é½ã€‚
2. `/api/v1/dict/options/{dict_type_code}` æ¥å£å¯ä¾›å‰ç«¯å¿«é€ŸæŸ¥è¯¢ä¸‹æ‹‰é€‰é¡¹ï¼Œå“åº”è½»é‡ã€‚
3. å†™æ“ä½œé™å®šä¸ºç®¡ç†å‘˜ï¼ŒæŸ¥è¯¢æ¥å£å…è®¸ç™»å½•ç”¨æˆ·è®¿é—®ã€‚
4. æ•°æ®åº“è¡¨ç»“æ„åˆç†ï¼Œæ”¯æŒå±‚çº§å…³ç³»ï¼ˆ`parent_id`ï¼‰ä¸æ‰©å±•å­—æ®µï¼ˆ`extra_data`ï¼‰ã€‚
5. Swagger æ–‡æ¡£å®Œæ•´ï¼Œå‰ç«¯å¯æ®æ­¤å¯¹æ¥ï¼›æœ€å°æµ‹è¯•è¦†ç›–é€šè¿‡å…³é”®æ­£ååœºæ™¯ã€‚

---

## åã€è¿›åº¦æ¸…å•ï¼ˆChecklistï¼‰

- [ ] ä»»åŠ¡è¯´æ˜æ–‡æ¡£ï¼ˆæœ¬æ–‡ä»¶ï¼‰
- [ ] æ•°æ®æ¨¡å‹å®šä¹‰ï¼ˆ`models/dict.py`ï¼‰
- [ ] Alembic è¿ç§»è„šæœ¬
- [ ] CRUD æ“ä½œå±‚ï¼ˆ`db/crud_dict.py`ï¼‰
- [ ] API ç«¯ç‚¹å®ç°ï¼ˆ`api/endpoints/dict.py`ï¼‰
- [ ] è·¯ç”±æ³¨å†Œï¼ˆ`api/routes.py`ï¼‰
- [ ] Swagger æ³¨é‡Šå®Œå–„
- [ ] å•å…ƒæµ‹è¯•ï¼ˆ`tests/test_dict.py`ï¼‰
- [ ] åˆå§‹åŒ–æ•°æ®è„šæœ¬ï¼ˆå¯é€‰ï¼‰
- [ ] ä¸å‰ç«¯ FE-07 è”è°ƒé€šè¿‡

---

## åä¸€ã€é£é™©ä¸å¯¹ç­–

- **çº§è”åˆ é™¤é£é™©**ï¼šåˆ é™¤å­—å…¸ç±»å‹æˆ–çˆ¶é¡¹æ—¶éœ€è°¨æ…ï¼Œå»ºè®®å‰ç«¯äºŒæ¬¡ç¡®è®¤ï¼›åç«¯æä¾›çº§è”åˆ é™¤æˆ–è½¯åˆ é™¤é€‰é¡¹ã€‚
- **ç¼–ç å†²çª**ï¼šä¸¥æ ¼æ ¡éªŒ `code` å”¯ä¸€æ€§ï¼Œé¿å…æ•°æ®é‡å¤ã€‚
- **æ‰©å±•æ€§**ï¼š`extra_data` ä¸º JSON å­—æ®µï¼Œæ”¯æŒçµæ´»æ‰©å±•ï¼›`parent_id` é¢„ç•™å±‚çº§å…³ç³»ï¼ŒV1 å¯ä¸º `null`ã€‚

---

## åäºŒã€ä¸ç°æœ‰ä»£ç çš„å¥‘åˆç‚¹

- ç»Ÿä¸€å“åº”å°è£…ï¼š`backend/app/utils/response.py`ã€‚
- é‰´æƒä¾èµ–ï¼š`backend/app/api/dependencies.py`ï¼ˆ`get_current_user`, `get_current_superuser`ï¼‰ã€‚
- æ•°æ®åº“ä¼šè¯ï¼š`backend/app/db/database.py`ï¼ˆ`get_db`ï¼‰ã€‚
- è·¯ç”±æ³¨å†Œï¼š`backend/app/api/routes.py`ã€‚

---

## åä¸‰ã€åç»­æ‰©å±•æ–¹å‘

- å¤šè¯­è¨€æ”¯æŒï¼šä¸ºå­—å…¸é¡¹å¢åŠ å¤šè¯­è¨€å­—æ®µï¼ˆ`locale`ï¼‰ã€‚
- æ‰¹é‡æ“ä½œï¼šæ”¯æŒæ‰¹é‡å¯¼å…¥/å¯¼å‡ºå­—å…¸æ•°æ®ï¼ˆCSV/JSONï¼‰ã€‚
- ç‰ˆæœ¬å®¡è®¡ï¼šè®°å½•å­—å…¸é¡¹çš„å˜æ›´å†å²ã€‚
- è½¯åˆ é™¤ï¼šå¢åŠ  `deleted_at` å­—æ®µï¼Œæ”¯æŒé€»è¾‘åˆ é™¤ä¸æ¢å¤ã€‚

---

## åå››ã€å‚è€ƒä¸é™„ä»¶

- ç»Ÿä¸€å“åº”å·¥å…·ï¼š`backend/app/utils/response.py`
- é‰´æƒä¾èµ–ï¼š`backend/app/core/security.py` ä¸ `backend/app/api/dependencies.py`
- æ•°æ®åº“æ¨¡å‹å‚è€ƒï¼š`backend/app/models/config.py`ã€`backend/app/models/user.py`

