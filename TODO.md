# **Queqiao-arr 开发任务清单 (TODO List)**

本文档基于《Queqiao-arr 技术方案与开发计划书》生成，旨在将开发任务分解为可执行的清单，以便跟踪项目进度。任务按三个核心里程碑进行组织。

## 里程碑一: 基础架构与配置闭环 (第一月)

**目标:** 完成项目搭建、CI/CD、后端用户认证和配置API、前端所有UI页面开发及联调。交付一个可交互但无核心自动化功能的原型。

### ⓪ 项目基础 (Foundation)
- [x] `[F-01]` 初始化项目结构（后端FastAPI + 前端Vue），配置Git仓库 (`复杂度: S, 估算: 2 PD`)
- [x] `[F-02]` 搭建Docker & Docker Compose本地开发环境，实现一键启动 (`复杂度: S, 估算: 1 PD`) ✅ **已完成** *2025-10-24 完成多阶段构建、开发/生产环境分离、一键启动脚本*
- [ ] `[F-03]` 配置Git提交信息规范检查与预提交钩子（使用commitlint & husky） (`复杂度: S, 估算: 1 PD`)
- [ ] `[F-04]` 配置CI/CD基础流水线（如GitHub Actions），实现自动化测试和代码检查 (`复杂度: S, 估算: 2 PD`)

### ① 后端 (Backend - 基础API)
- [x] `[B-01]` 用户认证模块API：实现首次运行创建管理员、登录、JWT令牌生成与校验 (`复杂度: M, 估算: 3 PD`)
- [x] `[B-02]` 配置模块API：提供对Sonarr, Prowlarr, 代理配置的增删改查接口 (`复杂度: M, 估算: 3 PD`)
- [x] `[B-03]` 实现配置信息的加密存储与解密读取逻辑 (`复杂度: M, 估算: 3 PD`)
- [x] `[B-09]` 元数据提供商配置API：管理 TMDB（可选 Bangumi）配置（增删改查、连接测试、语言/地区/速率限制），供 `[B-04]` 使用 (`复杂度: M, 估算: 3 PD`)
- [x] `[B-10]` 外部服务客户端层（Sonarr/Prowlarr/TMDB）：统一封装基础客户端与工厂，提供状态检查/请求封装/代理与超时支持，供 B-02/B-04/B-05 复用 (`复杂度: M, 估算: 3 PD`) ✅ *完成于 2025-10-16*

- [x] `[B-11]` 系统字典管理API：提供字典类型与字典项的增删改查、统一选项查询接口，供前端下拉与后端校验复用（如语言/地区等） (`复杂度: S, 估算: 2 PD`) ✅ **已完成** *2025-10-22 与前端联调通过*

### ② 前端 (Frontend - UI)
- [x] `[FE-01]` 搭建Vue 3 + TS项目，集成Element Plus UI库和Vue Router (`复杂度: S, 估算: 1 PD`)
- [x] `[FE-02]` 开发注册页面（仅首次运行显示） (`复杂度: M, 估算: 3 PD`)
- [x] `[FE-03]` 开发登录页面，并完成与后端`[B-01]`的API联调 (`复杂度: M, 估算: 3 PD`)
- [x] `[FE-04]` 开发主设置页面UI，包含Sonarr, Prowlarr, 代理三个配置区块 (`复杂度: L, 估算: 5 PD`)
- [x] `[FE-05]` 完成主设置页面与后端`[B-02]`的API联调，实现配置的保存、读取和连接测试功能 (`复杂度: L, 估算: 5 PD`)
- [x] `[FE-06]` 元数据提供商设置页面UI与`[B-09]`联调（支持TMDB，预留扩展其他源） (`复杂度: M, 估算: 3 PD`)

- [x] `[FE-07]` 系统字典管理页面：支持字典类型与字典项的列表/搜索/分页/新增编辑删除，联动后端`[B-11]` (`复杂度: S, 估算: 2 PD`) ✅ **已完成** *2025-10-22 UI开发与联调通过*

## 里程碑二: 核心引擎攻坚 (第二月)

**目标:** 完成自动化处理引擎的全部核心逻辑开发，包括API客户端、标题解析器和Torznab格式化工具。交付一个功能完整的内部测试版。

### ① 后端 (Backend - 核心引擎)
- [ ] `[B-04]` TMDB API 客户端封装：实现根据剧集信息查询中文别名，包含缓存和错误处理机制 (`复杂度: M, 估算: 3 PD`)
- [ ] `[B-05]` Prowlarr API 客户端封装：实现向Prowlarr发起搜索请求 (`复杂度: S, 估算: 2 PD`)
- [ ] `[B-06]` **[核心]** 标题解析器 V1：开发核心解析逻辑，支持至少5种常见的国漫资源命名格式，能准确提取集号、质量等信息 (`复杂度: XL, 估算: 8 PD`)
- [ ] `[B-07]` **[核心]** Torznab XML 生成模块：根据解析结果，生成符合Sonarr规范的XML响应 (`复杂度: L, 估算: 5 PD`)
- [ ] `[B-08]` **[核心]** 端到端自动化引擎编排：实现Torznab API端点，将`[B-04]`至`[B-07]`的模块串联起来，完成完整的请求处理-增强-搜索-解析-响应流程 (`复杂度: L, 估算: 4 PD`)

## 里程碑三: 集成、测试与发布 (第三月)

**目标:** 集中进行测试、修复Bug、完善文档，并发布Beta和V1.0正式版。

### ③ 集成与测试 (Integration & Testing)
- [ ] `[T-01]` 前后端完整流程联调，确保所有功能模块协同工作正常 (`复杂度: M, 估算: 3 PD`)
- [ ] `[T-02]` 编写核心模块单元测试，特别是针对`[B-06]`标题解析器，覆盖各种边界情况 (`复杂度: L, 估算: 4 PD`)
- [ ] `[T-03]` 编写端到端集成测试脚本，模拟Sonarr的API调用，验证整个自动化流程的正确性 (`复杂度: L, 估算: 4 PD`)
- [ ] `[T-04]` 在实际环境中（与真实的Sonarr/Prowlarr对接）进行系统测试，验证国漫自动匹配成功率 (`复杂度: M, 估算: 3 PD`)

### ④ 文档与发布 (Documentation & Release)
- [ ] `[D-01]` 编写清晰的用户使用文档，包括Docker部署指南、配置步骤和常见问题解答 (`复杂度: M, 估算: 2 PD`)
- [ ] `[D-02]` 准备Beta版本发布，打包Docker镜像并推送到镜像仓库 (`复杂度: S, 估算: 1 PD`)
- [ ] `[D-03]` 收集Beta用户反馈，并集中修复关键Bug
- [ ] `[D-04]` V1.0 正式版发布，更新发布日志和文档 (`复杂度: S, 估算: 1 PD`)

---

**说明:**
- **任务ID:** `[F/B/FE/T/D-XX]` 用于快速引用和讨论。
- **估算单位:** PD = 人日 (Person-Day)。
- **缓冲时间:** 整体计划中已预留 **7 PD** 的缓冲时间，用于应对突发问题和技术难点。
